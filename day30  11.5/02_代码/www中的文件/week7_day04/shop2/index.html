<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="referrer" content="no-referrer">
  <title>Document</title>
  <link rel="stylesheet" href="./bootstrap-3.3.7-dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="./css/base.css">
  <link rel="stylesheet" href="./css/index.css">
</head>
<body>
  <div class="jumbotron">
    <h1>我是一个首页
      <a href="./pages/res.html" class="btn btn-danger btn-lg" role="button">注册</a>
      <a href="JavaScript:;" name="login" class="btn btn-danger btn-lg" role="button">登录</a>
      <a href="JavaScript:;" name="back" class="btn btn-danger btn-lg" role="button">退出登录</a>
      <button name="cart"  class="btn btn-danger btn-lg" role="button">购物车</button>
    </h1>
    <p>应该根据后台数据,生成页面,有瀑布流,有轮播图,我就懒得写了</p>
    <p><a class="btn btn-primary btn-lg" href="./pages/list.html?cat_one_id=食品酒水" role="button">食品酒水</a></p>
    <p><a class="btn btn-primary btn-lg" href="./pages/list.html?cat_one_id=童装玩具" role="button">童装玩具</a></p>
    <p><a class="btn btn-primary btn-lg" href="./pages/list.html?cat_one_id=家装建材" role="button">家装建材</a></p>
    <p><a class="btn btn-primary btn-lg" href="./pages/list.html?cat_one_id=奶粉尿裤" role="button">奶粉尿裤</a></p>
    <p><a class="btn btn-primary btn-lg" href="./pages/list.html?cat_one_id=其他" role="button">其他产品</a></p>
  </div>
  
  <script src="./js/jquery.min.js"></script>
  <script src="./js/cookie.js"></script>
  <script>
    // 登录按钮
    $('[name="login"]').click(()=>{
      window.location.href = `./pages/login.html?url=${window.location.href}`;
    })

    // 退出登录按钮事件
    $('[name="back"]').click(()=>{
      // 设定时效过期,删除cookie
      mySetCookie( 'login' , 1 , -1 );
      // 弹窗提示
      window.alert('您已经退出');
    })

    // 购物车按钮点击事件
    $('[name="cart"]').click(()=>{
      // 获取 cookie 信息对象
      const cookieObj = myGetCookie();

      // 如果登录了,调用 cookieObj.login 应该是 属性值1
      // 如果没有登录,调用 cookieObj.login 应该是 undefined
      if( cookieObj.login === undefined ){
        let bool = window.confirm('您还没有登录,点击确定,跳转登录页面');
        // 如果点击确定,bool是true,执行跳转,false,没有执行程序
        if(bool){ 
          window.location.href = `./pages/login.html?url=${window.location.href}`;
        }

      }else{
        // 已经登录,直接跳转购物页面
        window.location.href = './pages/cart.html';

      }
    })
  </script>
</body>
</html>
