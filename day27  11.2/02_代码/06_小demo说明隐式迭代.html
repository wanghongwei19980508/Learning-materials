<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- <ul>
        <li name="li1">1</li>
        <li name="li2">2</li>
        <li name="li3">3</li>
        <li name="li4">4</li>
        <li name="li5">5</li>
    </ul> -->

    

    <label>
        <input name="all" type="checkbox"> 全选 
    </label>

    <button name="not">反选</button>
    
    
    <br>

    <input name="other" type="checkbox"><br>
    <input name="other" type="checkbox"><br>
    <input name="other" type="checkbox"><br>
    <input name="other" type="checkbox"><br>
    <input name="other" type="checkbox"><br>


    <script src="./jquery.min.js"></script>
    <script>
        /*
            隐式迭代:
                1, jQuery中 所有获取的标签对象,不管是选择器还是筛选器,执行结果一定是一个伪数组
                2, 如果需要操作其中的一个标签,应该是 通过索引下标,将这个标签获取出来,再操作
                   如果需要操作的标签对象,应该是,循环遍历,所有的标签对象,设定操作效果
                3, jQuery中,会默认对,伪数组中的所有单元进行操作设定
        
        
        */

        // 给ul中所有的li标签,设定字体颜色为红色
        // jQuery会 默认的 循环遍历 $('ul>li') 伪数组中 所有的标签对象
        // 给 每一个 标签对象,都设定 css样式color 为 red
        // $('ul>li').css({color:'red'});

        // 获取ul中所有的li,name属性的属性值
        // 如果是获取属性属性值,只会获取伪数组中,第一个标签对象结果,之后的不会再获取
        // console.log( $('ul>li').attr('name') );



        /*
            全选思路:
                点击 input 全选标签时 获取 全选标签 checked属性的属性值
                设定给下方所有的input标签

            反选思路:
                点击 反选 button按钮时
                    获取每一个下方input标签,checked属性的属性值
                    取反,再赋值给这个标签

                问题: 隐式迭代,是jQuery默认执行的效果
                      设定: 是给伪数组中,所有的标签都设定效果
                      获取: 只获取第一个标签的属性值

                解决: 获取每一个标签对象时,要使用jQuery的循环遍历语法
                      $().each( (参数1,参数2)=>{} )

                      参数1: 循环时,当前单元的索引下标
                      参数2: 循环时,当前单元的存储数据--也就是标签对象
                      没有参数3
        
        */


        // 全选
        $('[name="all"]').click( function(){
            // 给所有name是other的input标签,通过 prop() 设定属性
            // 属性是 checked , 属性值 是 label>input checked的属性值
            // 事件处理函数中,this,指向的是 添加事件的标签对象
            // 是 JavaScript语法的 独立标签对象,不是使用 $()包裹 才是 jQuery标签对象伪数组
            // $('[name="other"]').prop('checked' , $(this).prop('checked') );

            // 如果 不使用 $() 包裹this this就是JavaScript语法,标签对象,只能使用JavaScript语法擦做
            $('[name="other"]').prop('checked' , this.checked );



        } );

        // 反选:
        $('[name="not"]').click( function(){
            $('[name="other"]').each( (k,v)=>{
                // 设定 当前标签的checked属性
                // 属性值 是 当前标签, checked属性值 取反
                // jQuery each方法,循环遍历 伪数组
                // 伪数组单元中,存储的都是 独立的标签对象
                // 如果需要操作,必须使用 $() 专户为 jQuery 的语法对象
                // $(v).prop('checked' ,  !$(v).prop('checked') )

                // JavaScript语法形式
                // v.checked = !(v.checked);
            } )
        } )

        // 如果下方的 input 都选中了,全选的input也要自动选中
        // 只要有一个 下方的 input 没有选中, 就给 全选input取消选中


        // 给 下方的每一个input,都绑定点击事件
        $('[name="other"]').click( ()=>{
            // 在函数中设定 bool , 作为 判断的开关
            let bool = true;

            // 点击时,循环遍历每一个 下方input , checked属性值
            // 如果都是 true  给 全选input也赋值为 true
            // 如果有一个是 false  给 全选input也赋值为 false

            $('[name="other"]').each( (k,v)=>{
                if( $(v).prop('checked') === false ){
                    // 给最终结果赋值为false
                    bool = false;
                    // 终止循环
                    // break;
                }
            } )

            // 给全选标签 赋值 checked 属性值
            $('[name="all"]').prop( 'checked' , bool );
        } )

    </script>
</body>
</html>